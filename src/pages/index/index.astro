---
import BaseLayout from '../../layouts/BaseLayout.astro';
import { getProjects } from '../../lib/projects';

const base = import.meta.env.BASE_URL;
const projectsData = getProjects();
const projects = projectsData.map((p) => ({
  title: p.title,
  type: p.type || '',
  year: p.year || '',
  slug: p.id,
  image: p.images?.[0],
}));
---

<BaseLayout title="Index" variant="inner">
  <main class="works-page">
    <div class="index-list-wrap">
      <div class="index-list">
        <div class="index-list__header">
          <span class="col-project">Project</span>
          <span class="col-type">Type</span>
          <span class="col-year">Year</span>
        </div>
        {projects.map((project) => (
          <a href={`${base}project/${project.slug}/`} class="index-list__row">
            <span class="col-project">{project.title}</span>
            <span class="col-type">{project.type}</span>
            <span class="col-year">{project.year}</span>
          </a>
        ))}
      </div>
    </div>
  </main>
</BaseLayout>
